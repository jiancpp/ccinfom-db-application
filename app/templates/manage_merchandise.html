{% extends "base.html" %}
{% block title %}Manage Merchandise - KSync{% endblock %}
{% block content %}
<style>
    table {
        width: 100%;
        border-collapse: collapse; /* Ensure clean table borders */
        margin-top:3px;
    }
    th, td {
        padding: 12px 8px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0; /* Light line under rows */
        white-space: wrap; /* Prevent wrapping of short names/IDs */
    }
    th {
        background-color: #f7fafc; /* Light header background */
        font-weight: 700;
        color: #4a5568;
    }
    .btn-smaller {
        font-size: 12px;
        padding: 6px 10px; /* Adjusted padding for better fit */
        margin: 0 5px;
        border-radius: 4px;
        text-decoration: none;
        display: inline-block;
    }
    .event-table {
        width: 100%; 
        max-height: 500px; /* Set a max height */
        overflow-y: auto; /* Enable vertical scroll bar */
        border: 1px solid #e2e8f0;
        border-radius: 8px;
    }
    .center {
        margin: auto;
        text-align: center;
    }
    /* Style for event lists to look like comma-separated badges */
    .event-list-badge {
        display: block;
        padding: 3px 0;
        font-size: 0.9em;
        line-height: 1.3;
        color: #5a67d8; /* Highlight color for events */
        max-width: 250px;
    }

</style>

<div>
    <button class="btn btn-outline" onclick="window.location.href='{{ url_for('main_routes.manager_portal') }}'"><i class="fa fa-arrow-left"></i> Back</button>
    <div class="header-titles">
        <h1 style="color: #667eea; margin-top: 0.5rem; margin-bottom: 0.1rem; font-size: 3rem; white-space: nowrap;">
            Manage Merchandise Records
        </h1>
        <p style="font-size: 1.3rem; font-weight: 300; color: #555; margin-top: 0; white-space: nowrap;">
            View, Add, Delete, and Update Merchandise Records
        </p>
    </div>
</div>

{% if merchandise %}
<div class="event-table"> 
    <table>
        
        <thead>
            <tr> 
                <th>ID</th> 
                <th>Name</th>
                <th>Event IDs</th>
                <th>Event Names</th>
                <th>Artist Name</th> 
                <th>Fanclub Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Init Stock</th>
                <th>Curr Stock</th>
                <th>Actions</th> 
            </tr> 
        </thead>
        
        <tbody>
            {% for merch in merchandise %}
            <tr>
                <td> <span class="event-list-badge">{{ merch.Merchandise_ID }}</span></td>
                <td><span class="event-list-badge">{{ merch.Merchandise_Name }}</span></td>
                
                <td>
                        {{ merch.Event_IDs }}
                </td>
                
                <td>
                        {{ merch.Event_Names }}
                </td>

                <td>{{ merch.Artist_Name or 'N/A' }}</td>
                <td>{{ merch.Fanclub_Name or 'N/A' }}</td>
                <td>{{ merch.Merchandise_Description }}</td>
                <td>â‚±<span class="money">{{ merch.Merchandise_Price }}</span></td>
                <td>{{ merch.Initial_Stock }}</td>
                <td>{{ merch.Quantity_Stock }}</td>
                <td>
                    <a href="{{ url_for('main_routes.edit_merchandise', merchandise_id=merch.Merchandise_ID) }}" class="btn btn-smaller">
                    Edit
                    </a>
                    <form method="POST" action="{{ url_for('main_routes.delete_merchandise', merchandise_id=merch.Merchandise_ID) }}" 
                        style="display: inline;" 
                        onsubmit="return confirm('Are you sure you want to delete the merchandise {{ merch.Merchandise_Name }}? This action cannot be undone.');">
                        
                        <button type="submit" class="btn btn-smaller">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div style="padding: 10px; margin-top: 20px;">
    <button class="btn" onclick="window.location.href='{{ url_for('main_routes.add_merchandise') }}'">Add New Merchandise</button>
</div>
{% else %}
<p class="center" style="margin-top: 2rem; color: #718096;">No merchandise records found.</p>
{% endif %}


{% endblock %}